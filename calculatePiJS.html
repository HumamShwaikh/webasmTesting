<html>

<body>
    <input type="button" onclick="Calculate()" value="Calculate Pi in JS" />
    <input type="button" onclick="CalculateWASM()" value="Calculate Pi WASM" />
    <script type="text/javascript">
        //Made by Masterdude
        var c = 100000000;
        function Calculate() {
            console.log('JavaScript')
            console.time('Calculate');
            if (c > 0) {
                var Pi = 0;
                var n = 1;
                for (i = 0; i <= c; i++) {
                    Pi = Pi + (4 / n) - (4 / (n + 2))
                    n = n + 4
                }
                console.timeEnd('Calculate');
                alert(Pi);
            }
            else {
                alert("Canceled or Error in input: Input must be positive.");
            }        
            
        }
        function CalculateWASM() {
            let calculatePi;

            function loadWasm(filename) {
                return fetch(filename)
                .then(response => response.arrayBuffer())
                .then(bits => WebAssembly.compile(bits))
                .then(module => {return new WebAssembly.Instance(module)});
            };

            loadWasm('program.wasm')
            .then(instance => {calculatePi = instance.exports._Z11calculatePii})

            console.time('CalculateWasm');
            alert(calculatePi(c));
            console.timeEnd('CalculateWasm');

        }
    </script>
</body>

</html>